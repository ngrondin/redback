<div
    class="rb-filter-builder-container">
    <div>
        <span>Add filter for&nbsp;&nbsp;</span>
        <mat-form-field>
            <mat-label>Attributes</mat-label>
            <mat-icon
                matPrefix
                class="rb-grey-icon">search</mat-icon>
            <mat-select
                [(value)]="selectedAttribute"
                (selectionChange)="addSelectedAttribute()">
                <mat-option 
                    *ngFor="let attribute of config.filterConfig.attributes" 
                    [value]="attribute">
                    {{attribute.label}}
                </mat-option>
            </mat-select>
        </mat-form-field>
    </div>
    <div
        class="rb-filter-builder-canvas">
        <div
            *ngFor="let filterConstruct of filterConstructs"
            class="rb-filter-builder-line">
            <span>
                {{filterConstruct.config.label}} : &nbsp;&nbsp;
            </span>

            <mat-form-field
                *ngIf="filterConstruct.config.type == 'string'">
                <mat-label>Value</mat-label>
                <input
                    matInput
                    [(ngModel)]="filterConstruct.val1"
                    autocomplete="off">
                    <mat-icon 
                        matPrefix
                        class="rb-grey-icon">create</mat-icon>
            </mat-form-field>
            
            <mat-form-field 
                *ngIf="filterConstruct.config.type == 'date'">
                <mat-select
                    (selectionChange)="filterConstruct.val1 = $event.value"
                    [value]="filterConstruct.val1">
                    <mat-option
                        *ngFor="let choice of datechoice"
                        [value]="choice.value">
                        {{choice.display}}
                    </mat-option>
                </mat-select>
                <mat-icon 
                    matPrefix
                    class="rb-grey-icon">date_range</mat-icon>
            </mat-form-field>  
            <rb-datetime-input
                *ngIf="filterConstruct.config.type == 'date' &&  (filterConstruct.val1 == 'since' || filterConstruct.val1 == 'between')"
                [editable]="true"
                [(value)]=filterConstruct.val2>
            </rb-datetime-input>          
            <rb-datetime-input
                *ngIf="filterConstruct.config.type == 'date' &&  filterConstruct.val1 == 'between'"
                [editable]="true"
                [(value)]=filterConstruct.val3>
            </rb-datetime-input>          
            <button
                mat-button
                class="mat-mini mat-primary rb-button" 
                (click)="removeFilterItem(filterConstruct)">
                <mat-icon class="md-hue-3" >remove_circle_outline</mat-icon>
            </button>

        </div>
    </div>
    <div>
        <button
            mat-button
            class="mat-mini-fab mat-primary rb-button" 
            (click)="clickOk()">
            <mat-icon class="md-hue-3" >check</mat-icon>
        </button>
    </div>
</div>