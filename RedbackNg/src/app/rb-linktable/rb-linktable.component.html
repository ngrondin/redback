<div
    [class]="'rb-linktable-header-container'">
    <div
        [class]="'rb-linktable-header' + (grid ? ' rb-linktable-header-grid' : '')"
        [style.left.px]="-scrollLeft">
        <div
            class="rb-linktable-colheader"
            *ngFor="let col of columns"
            [style.width.vw]="col.width"
            (click)="clickColumnHeader(col)">
            <span>{{col.label}}</span>
        </div>
    </div>
</div>
<rb-scroll
    (rbscroll)="onScroll($event)">                                                                                                                                                    
    <div
        [class]="'rb-linktable-body' + (grid ? ' rb-linktable-border' : '')">
        <div
            *ngFor="let groupKey of groupKeys"
            class="rb-linktable-group">
            <div
                *ngIf="groupKey != 'null'"
                [class]="'rb-linktable-grouprow'">
                <div
                    *ngFor="let col of groups[groupKey].sums; index as i"
                    [class]="'rb-linktable-rowitem' + (col.align == 'right' ? ' rb-linktable-rowitem-alighright' : '') + (grid ? ' rb-linktable-border' : '')"
                    [style.width.vw]="col.width"
                    (click)="toggleGroup(groupKey)">
                    <span
                        *ngIf="i == 0">
                        {{groupKey}}             
                    </span>   
                    <span
                        [style.font-weight]="'bold'"
                        *ngIf="i > 0">
                        {{col.formattedValue}}                
                    </span>               
                </div>            
            </div>
            <div
                [class]="'rb-linktable-row'"
                *ngFor="let line of groups[groupKey].lines">
                <div
                    *ngFor="let col of line.cols; index as i"
                    [class]="'rb-linktable-rowitem' + (col.align == 'right' ? ' rb-linktable-rowitem-alighright' : '') + (grid ? ' rb-linktable-border' : '')"
                    [style.width.vw]="col.width"
                    [style.background-color]="col.backColor"
                    [style.color]="col.foreColor">
                    <a
                        *ngIf="col.icon == null && col.link != null"
                        (click)="clickLink(col.link, line.object)">
                        {{col.formattedValue}}                
                    </a>
                    <a
                        *ngIf="col.icon == null && col.modal != null"
                        (click)="clickModal(col.modal)">
                        {{col.formattedValue}}                
                    </a>
                    <span
                        *ngIf="col.icon == null && col.link == null">
                        {{col.formattedValue}}                
                    </span>
                    <div
                        *ngIf="col.icon != null"
                        class="rb-linktable-icon">
                        <mat-icon
                            class="material-symbols-outlined">
                            {{col.icon}}
                        </mat-icon>         
                    </div>                
                </div>
            </div>          
        </div>
    </div>
</rb-scroll>
<div
    *ngIf="showFooter()"
    [class]="'rb-linktable-footer-container'">
    <div
        [class]="'rb-linktable-footer' + (grid ? ' rb-linktable-footer-grid' : '')"
        [style.left.px]="-scrollLeft">
        <div
            *ngFor="let col of sums"
            [class]="'rb-linktable-colfooter' + (col.align == 'right' ? ' rb-linktable-rowitem-alighright' : '') + (grid ? ' rb-linktable-colfooter-grid' : '')"
            [style.visibility]="col.formattedValue != null ? 'visible' : 'hidden'"
            [style.width.vw]="col.width">
            <a
                *ngIf="col.link != null"
                (click)="clickSumLink(col.link)">
                {{col.formattedValue}}
            </a>
            <span
                *ngIf="col.link == null">
                {{col.formattedValue}}            
            </span>            
        </div>
    </div>
</div>